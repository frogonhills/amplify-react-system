{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/shifatahmed_MAC/amplifymaster/src/components/DisplayPost.js\";\nimport React, { Component } from 'react';\nimport { listPosts } from '../graphql/queries';\nimport { API, graphqlOperation } from 'aws-amplify';\nimport DeletePost from './DeletePost';\nimport EditPost from './EditPost';\nimport { onCreatePost } from '../graphql/subscriptions';\n\nclass DisplayPost extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      posts: []\n    };\n\n    this.componentDidMount = async () => {\n      this.getPosts();\n      this.createPostListener = API.graphql(graphqlOperation(onCreatePost)).subscribe({\n        next: postData => {\n          const newPost = postData.value.data.onCreatePost;\n          const prevPosts = this.state.posts.filter(post => post.id !== newPost.id);\n          const updatedPosts = [newPost, ...prevPosts];\n          this.setState({\n            posts: updatedPosts\n          });\n        }\n      });\n    };\n\n    this.getPosts = async () => {\n      const result = await API.graphql(graphqlOperation(listPosts)); //console.log(\"all posts\" , JSON.stringify(result.data.listPosts.items))\n\n      this.setState({\n        posts: result.data.listPosts.items\n      });\n    };\n  }\n\n  componentWillUnmount() {\n    this.createPostListener.unsubscribe();\n  }\n\n  render() {\n    const {\n      posts\n    } = this.state;\n    return posts.map(post => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"posts\",\n        style: rowStyle,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: post.postTitle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: \"#0ca5e297\"\n          },\n          children: [\"wrote by: \", \" \", post.postOwnerUsername, \" on \", /*#__PURE__*/_jsxDEV(\"time\", {\n            style: {\n              fontStyle: \"italic\"\n            },\n            children: [\" \", new Date(post.createdAt).toDateString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: post.postBody\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(DeletePost, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(EditPost, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this)]\n      }, post.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this);\n    });\n  }\n\n}\n\nconst rowStyle = {\n  background: '#f4f4f4',\n  padding: '10px',\n  border: '1px #ccc dotted',\n  margin: '14px'\n};\nexport default DisplayPost;","map":{"version":3,"sources":["/Users/shifatahmed_MAC/amplifymaster/src/components/DisplayPost.js"],"names":["React","Component","listPosts","API","graphqlOperation","DeletePost","EditPost","onCreatePost","DisplayPost","state","posts","componentDidMount","getPosts","createPostListener","graphql","subscribe","next","postData","newPost","value","data","prevPosts","filter","post","id","updatedPosts","setState","result","items","componentWillUnmount","unsubscribe","render","map","rowStyle","postTitle","color","postOwnerUsername","fontStyle","Date","createdAt","toDateString","postBody","background","padding","border","margin"],"mappings":"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","sourcesContent":["import React , { Component } from 'react';\nimport {listPosts} from '../graphql/queries';\nimport {API , graphqlOperation} from 'aws-amplify';\n\nimport DeletePost from './DeletePost';\nimport EditPost from './EditPost';\nimport { onCreatePost } from '../graphql/subscriptions';\n\n\n\n\nclass DisplayPost extends Component {\n\n\n    state = {\n        posts: []\n    }\n\n    componentDidMount = async() => {\n        this.getPosts()\n\n        this.createPostListener = API.graphql(graphqlOperation(onCreatePost))\n            .subscribe({\n                next: postData => {\n                    const newPost = postData.value.data.onCreatePost;\n                    const prevPosts = this.state.posts.filter( post => post.id !== newPost.id );\n\n                    const updatedPosts = [newPost, ...prevPosts];\n\n                    this.setState({ posts: updatedPosts })\n                }\n            })\n    }\n\n    componentWillUnmount(){\n        this.createPostListener.unsubscribe()\n    }\n\n\n    getPosts = async () =>{\n\n        const result = await API.graphql(graphqlOperation(listPosts))\n        //console.log(\"all posts\" , JSON.stringify(result.data.listPosts.items))\n\n        this.setState({posts: result.data.listPosts.items})\n\n    }\n\n    render(){\n\n        const {posts} = this.state\n        return posts.map((post) => {\n            return(\n                <div className=\"posts\" style={rowStyle} key={post.id}>\n                    <h1>{post.postTitle}</h1>\n                    <span style={{ color: \"#0ca5e297\"}}  >\n                        {\"wrote by: \"} {post.postOwnerUsername}\n                        {\" on \"}\n                        <time style={{ fontStyle: \"italic\"}} >\n\n                            {\" \"}\n                            {new Date(post.createdAt).toDateString()}\n\n                        </time>\n                    </span>\n                    <p>{post.postBody}</p>\n\n                    <br />\n                    <span>\n                        <DeletePost />\n                        <EditPost />\n                    </span>\n                </div>\n            )\n        })\n    }\n}\n\nconst rowStyle = {\n    background: '#f4f4f4',\n    padding: '10px',\n    border: '1px #ccc dotted',\n    margin: '14px'\n}\nexport default DisplayPost"]},"metadata":{},"sourceType":"module"}